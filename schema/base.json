{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://dhruvkb.github.io/reschume/schema/base",

  "title": "Base definitions",
  "description": "Contains definitions for data types shared by many schema files.",

  "$defs": {
    "period": {
      "title": "Period",
      "description": "Represents the time period between a start and end date. For active periods, the end date can be omitted.",

      "type": "object",
      "properties": {
        "start": { "$ref": "#/$defs/date" },
        "end": { "$ref": "#/$defs/date" }
      },
      "required": ["start"],

      "examples": [
        { "start": [2020, 12], "end": [2021, 1, 1] },
        { "start": [2019] }
      ]
    },
    "date": {
      "title": "Date",
      "description": "Represents a date as an array consisting of year, month and date respectively. Only the year is required.",

      "type": "array",
      "prefixItems": [
        { "type": "integer", "minimum": 1 },
        { "type": "integer", "minimum": 1, "maximum": 12 },
        { "type": "integer", "minimum": 1, "maximum": 31 }
      ],
      "items": false,
      "minItems": 1,

      "examples": [[2021, 1, 1], [2020, 12], [2019]]
    },
    "address": {
      "title": "Address",
      "description": "Represents a physical location for an entity such as an organisation or educational institute.",

      "oneOf": [
        {
          "type": "object",
          "properties": {
            "addressLines": {
              "type": "array",
              "items": { "type": "string" },
              "minItems": 1
            },
            "postBox": { "type": "number" },

            "city": { "type": "string" },
            "state": { "type": "string" },
            "countryCode": { "type": "string", "pattern": "^[A-Z]{2}$" },
            "postCode": { "type": "integer" },

            "coordinates": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number",
                  "minimum": -90,
                  "maximum": 90
                },
                "longitude": {
                  "type": "number",
                  "minimum": -180,
                  "maximum": 180
                }
              },
              "required": ["latitude", "longitude"]
            }
          }
        },
        { "type": "string" }
      ],

      "examples": [
        "Navi Mumbai, India",
        {
          "city": "Navi Mumbai",
          "state": "Maharashtra",
          "countryCode": "IN",
          "postCode": 400000
        },
        {
          "addressLines": ["Navi Mumbai - 400000", "Maharashtra, India"]
        },
        {
          "coordinates": {
            "latitude": 19.033,
            "longitude": 73.0297
          }
        }
      ]
    }
  }
}
